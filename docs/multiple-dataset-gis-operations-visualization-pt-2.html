<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Multiple-Dataset GIS Operations / Visualization pt. 2 | R Spatial Workshop Notes</title>
  <meta name="description" content="Chapter 4 Multiple-Dataset GIS Operations / Visualization pt. 2 | R Spatial Workshop Notes" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Multiple-Dataset GIS Operations / Visualization pt. 2 | R Spatial Workshop Notes" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="spatialanalysis/workshop-notes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Multiple-Dataset GIS Operations / Visualization pt. 2 | R Spatial Workshop Notes" />
  
  
  

<meta name="author" content="Angela Li" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="multiple-dataset-gis-operations-visualization.html">
<link rel="next" href="r-markdown-and-custom-maps.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#workshop-organization"><i class="fa fa-check"></i>Workshop Organization</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prior-knowledge"><i class="fa fa-check"></i>Prior Knowledge</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#topics"><i class="fa fa-check"></i>Topics</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#additional-information"><i class="fa fa-check"></i>Additional information</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="project-setup.html"><a href="project-setup.html"><i class="fa fa-check"></i>Project Setup</a><ul>
<li class="chapter" data-level="" data-path="project-setup.html"><a href="project-setup.html#prerequisites-for-git-workflow"><i class="fa fa-check"></i>Prerequisites for Git workflow</a></li>
<li class="chapter" data-level="" data-path="project-setup.html"><a href="project-setup.html#workflow-with-git"><i class="fa fa-check"></i>Workflow with Git</a></li>
<li class="chapter" data-level="" data-path="project-setup.html"><a href="project-setup.html#workflow-without-git"><i class="fa fa-check"></i>Workflow without Git</a></li>
<li class="chapter" data-level="" data-path="project-setup.html"><a href="project-setup.html#additional-reading"><i class="fa fa-check"></i>Additional reading</a></li>
</ul></li>
<li class="part"><span><b>GIS and Spatial Data</b></span></li>
<li class="chapter" data-level="1" data-path="introduction-to-spatial-data.html"><a href="introduction-to-spatial-data.html"><i class="fa fa-check"></i><b>1</b> Introduction to Spatial Data</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-spatial-data.html"><a href="introduction-to-spatial-data.html#learning-objectives"><i class="fa fa-check"></i><b>1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-spatial-data.html"><a href="introduction-to-spatial-data.html#spatial-data-basics"><i class="fa fa-check"></i><b>1.2</b> Spatial Data Basics</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-spatial-data.html"><a href="introduction-to-spatial-data.html#interactive-tutorial"><i class="fa fa-check"></i><b>1.3</b> Interactive Tutorial</a><ul>
<li class="chapter" data-level="1.3.1" data-path="introduction-to-spatial-data.html"><a href="introduction-to-spatial-data.html#functions-learned"><i class="fa fa-check"></i><b>1.3.1</b> Functions learned</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction-to-spatial-data.html"><a href="introduction-to-spatial-data.html#import-spatial-data"><i class="fa fa-check"></i><b>1.3.2</b> Import spatial data</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction-to-spatial-data.html"><a href="introduction-to-spatial-data.html#project-your-data"><i class="fa fa-check"></i><b>1.3.3</b> Project your data</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-spatial-data.html"><a href="introduction-to-spatial-data.html#links"><i class="fa fa-check"></i><b>1.4</b> Links</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="single-dataset-gis-operations.html"><a href="single-dataset-gis-operations.html"><i class="fa fa-check"></i><b>2</b> Single-Dataset GIS Operations</a><ul>
<li class="chapter" data-level="2.1" data-path="single-dataset-gis-operations.html"><a href="single-dataset-gis-operations.html#learning-objectives-1"><i class="fa fa-check"></i><b>2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="single-dataset-gis-operations.html"><a href="single-dataset-gis-operations.html#functions-learned-1"><i class="fa fa-check"></i><b>2.2</b> Functions Learned</a></li>
<li class="chapter" data-level="2.3" data-path="single-dataset-gis-operations.html"><a href="single-dataset-gis-operations.html#interactive-tutorial-1"><i class="fa fa-check"></i><b>2.3</b> Interactive Tutorial</a></li>
<li class="chapter" data-level="2.4" data-path="single-dataset-gis-operations.html"><a href="single-dataset-gis-operations.html#exercises"><i class="fa fa-check"></i><b>2.4</b> Exercises</a></li>
<li class="chapter" data-level="2.5" data-path="single-dataset-gis-operations.html"><a href="single-dataset-gis-operations.html#links-1"><i class="fa fa-check"></i><b>2.5</b> Links</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="multiple-dataset-gis-operations-visualization.html"><a href="multiple-dataset-gis-operations-visualization.html"><i class="fa fa-check"></i><b>3</b> Multiple-Dataset GIS Operations / Visualization</a><ul>
<li class="chapter" data-level="3.1" data-path="multiple-dataset-gis-operations-visualization.html"><a href="multiple-dataset-gis-operations-visualization.html#learning-objectives-2"><i class="fa fa-check"></i><b>3.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="multiple-dataset-gis-operations-visualization.html"><a href="multiple-dataset-gis-operations-visualization.html#functions-learned-2"><i class="fa fa-check"></i><b>3.2</b> Functions Learned</a></li>
<li class="chapter" data-level="3.3" data-path="multiple-dataset-gis-operations-visualization.html"><a href="multiple-dataset-gis-operations-visualization.html#interactive-tutorial-2"><i class="fa fa-check"></i><b>3.3</b> Interactive Tutorial</a></li>
<li class="chapter" data-level="3.4" data-path="multiple-dataset-gis-operations-visualization.html"><a href="multiple-dataset-gis-operations-visualization.html#links-2"><i class="fa fa-check"></i><b>3.4</b> Links</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="multiple-dataset-gis-operations-visualization-pt-2.html"><a href="multiple-dataset-gis-operations-visualization-pt-2.html"><i class="fa fa-check"></i><b>4</b> Multiple-Dataset GIS Operations / Visualization pt. 2</a><ul>
<li class="chapter" data-level="4.1" data-path="multiple-dataset-gis-operations-visualization-pt-2.html"><a href="multiple-dataset-gis-operations-visualization-pt-2.html#learning-objectives-3"><i class="fa fa-check"></i><b>4.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="multiple-dataset-gis-operations-visualization-pt-2.html"><a href="multiple-dataset-gis-operations-visualization-pt-2.html#functions-learned-3"><i class="fa fa-check"></i><b>4.2</b> Functions Learned</a></li>
<li class="chapter" data-level="4.3" data-path="multiple-dataset-gis-operations-visualization-pt-2.html"><a href="multiple-dataset-gis-operations-visualization-pt-2.html#interactive-tutorial-3"><i class="fa fa-check"></i><b>4.3</b> Interactive Tutorial</a></li>
<li class="chapter" data-level="4.4" data-path="multiple-dataset-gis-operations-visualization-pt-2.html"><a href="multiple-dataset-gis-operations-visualization-pt-2.html#challenges"><i class="fa fa-check"></i><b>4.4</b> Challenges</a><ul>
<li class="chapter" data-level="4.4.1" data-path="multiple-dataset-gis-operations-visualization-pt-2.html"><a href="multiple-dataset-gis-operations-visualization-pt-2.html#a-simple-example"><i class="fa fa-check"></i><b>4.4.1</b> A simple example</a></li>
<li class="chapter" data-level="4.4.2" data-path="multiple-dataset-gis-operations-visualization-pt-2.html"><a href="multiple-dataset-gis-operations-visualization-pt-2.html#saving-your-plots"><i class="fa fa-check"></i><b>4.4.2</b> Saving your plots</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="multiple-dataset-gis-operations-visualization-pt-2.html"><a href="multiple-dataset-gis-operations-visualization-pt-2.html#links-3"><i class="fa fa-check"></i><b>4.5</b> Links</a></li>
</ul></li>
<li class="part"><span><b>Visualization</b></span></li>
<li class="chapter" data-level="5" data-path="r-markdown-and-custom-maps.html"><a href="r-markdown-and-custom-maps.html"><i class="fa fa-check"></i><b>5</b> R Markdown and Custom Maps</a><ul>
<li class="chapter" data-level="5.1" data-path="r-markdown-and-custom-maps.html"><a href="r-markdown-and-custom-maps.html#learning-objectives-4"><i class="fa fa-check"></i><b>5.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="r-markdown-and-custom-maps.html"><a href="r-markdown-and-custom-maps.html#topics-learned"><i class="fa fa-check"></i><b>5.2</b> Topics Learned</a></li>
<li class="chapter" data-level="5.3" data-path="r-markdown-and-custom-maps.html"><a href="r-markdown-and-custom-maps.html#interactive-tutorial-4"><i class="fa fa-check"></i><b>5.3</b> Interactive Tutorial</a></li>
<li class="chapter" data-level="5.4" data-path="r-markdown-and-custom-maps.html"><a href="r-markdown-and-custom-maps.html#challenges-1"><i class="fa fa-check"></i><b>5.4</b> Challenges</a></li>
<li class="chapter" data-level="5.5" data-path="r-markdown-and-custom-maps.html"><a href="r-markdown-and-custom-maps.html#links-4"><i class="fa fa-check"></i><b>5.5</b> Links</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="custom-and-animated-maps.html"><a href="custom-and-animated-maps.html"><i class="fa fa-check"></i><b>6</b> Custom and Animated Maps</a><ul>
<li class="chapter" data-level="6.1" data-path="custom-and-animated-maps.html"><a href="custom-and-animated-maps.html#learning-objectives-5"><i class="fa fa-check"></i><b>6.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="6.2" data-path="custom-and-animated-maps.html"><a href="custom-and-animated-maps.html#functions-learned-4"><i class="fa fa-check"></i><b>6.2</b> Functions Learned</a></li>
<li class="chapter" data-level="6.3" data-path="custom-and-animated-maps.html"><a href="custom-and-animated-maps.html#interactive-tutorial-5"><i class="fa fa-check"></i><b>6.3</b> Interactive Tutorial</a></li>
<li class="chapter" data-level="6.4" data-path="custom-and-animated-maps.html"><a href="custom-and-animated-maps.html#challenges-2"><i class="fa fa-check"></i><b>6.4</b> Challenges</a></li>
<li class="chapter" data-level="6.5" data-path="custom-and-animated-maps.html"><a href="custom-and-animated-maps.html#links-5"><i class="fa fa-check"></i><b>6.5</b> Links</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="interactive-maps.html"><a href="interactive-maps.html"><i class="fa fa-check"></i><b>7</b> Interactive Maps</a><ul>
<li class="chapter" data-level="7.1" data-path="interactive-maps.html"><a href="interactive-maps.html#learning-objectives-6"><i class="fa fa-check"></i><b>7.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="7.2" data-path="interactive-maps.html"><a href="interactive-maps.html#functions-learned-5"><i class="fa fa-check"></i><b>7.2</b> Functions Learned</a></li>
<li class="chapter" data-level="7.3" data-path="interactive-maps.html"><a href="interactive-maps.html#overview"><i class="fa fa-check"></i><b>7.3</b> Overview</a></li>
<li class="chapter" data-level="7.4" data-path="interactive-maps.html"><a href="interactive-maps.html#interactive-tutorial-6"><i class="fa fa-check"></i><b>7.4</b> Interactive Tutorial</a></li>
<li class="chapter" data-level="7.5" data-path="interactive-maps.html"><a href="interactive-maps.html#r-training-workshop"><i class="fa fa-check"></i><b>7.5</b> R Training Workshop</a></li>
<li class="chapter" data-level="7.6" data-path="interactive-maps.html"><a href="interactive-maps.html#next-weeks"><i class="fa fa-check"></i><b>7.6</b> Next week(s?)</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="interactive-maps-with-shiny.html"><a href="interactive-maps-with-shiny.html"><i class="fa fa-check"></i><b>8</b> Interactive Maps with Shiny</a><ul>
<li class="chapter" data-level="8.1" data-path="interactive-maps-with-shiny.html"><a href="interactive-maps-with-shiny.html#learning-objectives-7"><i class="fa fa-check"></i><b>8.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="interactive-maps-with-shiny.html"><a href="interactive-maps-with-shiny.html#topics-learned-1"><i class="fa fa-check"></i><b>8.2</b> Topics Learned</a></li>
<li class="chapter" data-level="8.3" data-path="interactive-maps-with-shiny.html"><a href="interactive-maps-with-shiny.html#overview-1"><i class="fa fa-check"></i><b>8.3</b> Overview</a></li>
<li class="chapter" data-level="8.4" data-path="interactive-maps-with-shiny.html"><a href="interactive-maps-with-shiny.html#interactive-tutorial-7"><i class="fa fa-check"></i><b>8.4</b> Interactive Tutorial</a></li>
<li class="chapter" data-level="8.5" data-path="interactive-maps-with-shiny.html"><a href="interactive-maps-with-shiny.html#r-training-workshop-1"><i class="fa fa-check"></i><b>8.5</b> R Training Workshop</a></li>
<li class="chapter" data-level="8.6" data-path="interactive-maps-with-shiny.html"><a href="interactive-maps-with-shiny.html#links-6"><i class="fa fa-check"></i><b>8.6</b> Links</a></li>
</ul></li>
<li class="part"><span><b>Raster Data</b></span></li>
<li class="chapter" data-level="9" data-path="introduction-to-raster-data.html"><a href="introduction-to-raster-data.html"><i class="fa fa-check"></i><b>9</b> Introduction to Raster Data</a><ul>
<li class="chapter" data-level="9.1" data-path="introduction-to-raster-data.html"><a href="introduction-to-raster-data.html#overview-2"><i class="fa fa-check"></i><b>9.1</b> Overview</a></li>
<li class="chapter" data-level="9.2" data-path="introduction-to-raster-data.html"><a href="introduction-to-raster-data.html#links-7"><i class="fa fa-check"></i><b>9.2</b> Links</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="introduction-to-interpolation.html"><a href="introduction-to-interpolation.html"><i class="fa fa-check"></i><b>10</b> Introduction to Interpolation</a><ul>
<li class="chapter" data-level="10.1" data-path="introduction-to-interpolation.html"><a href="introduction-to-interpolation.html#overview-3"><i class="fa fa-check"></i><b>10.1</b> Overview</a></li>
<li class="chapter" data-level="10.2" data-path="introduction-to-interpolation.html"><a href="introduction-to-interpolation.html#make-sure-relevant-packages-are-installed"><i class="fa fa-check"></i><b>10.2</b> Make sure relevant packages are installed</a></li>
<li class="chapter" data-level="10.3" data-path="introduction-to-interpolation.html"><a href="introduction-to-interpolation.html#links-8"><i class="fa fa-check"></i><b>10.3</b> Links</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="interpolation-with-array-of-things-data.html"><a href="interpolation-with-array-of-things-data.html"><i class="fa fa-check"></i><b>11</b> Interpolation with Array of Things Data</a><ul>
<li class="chapter" data-level="11.1" data-path="interpolation-with-array-of-things-data.html"><a href="interpolation-with-array-of-things-data.html#overview-4"><i class="fa fa-check"></i><b>11.1</b> Overview</a></li>
<li class="chapter" data-level="11.2" data-path="interpolation-with-array-of-things-data.html"><a href="interpolation-with-array-of-things-data.html#download-data"><i class="fa fa-check"></i><b>11.2</b> Download data</a></li>
<li class="chapter" data-level="11.3" data-path="interpolation-with-array-of-things-data.html"><a href="interpolation-with-array-of-things-data.html#links-9"><i class="fa fa-check"></i><b>11.3</b> Links</a></li>
</ul></li>
<li class="part"><span><b>Introduction to Spatial Data Science</b></span></li>
<li class="chapter" data-level="12" data-path="spatial-data-handling.html"><a href="spatial-data-handling.html"><i class="fa fa-check"></i><b>12</b> Spatial Data Handling</a><ul>
<li class="chapter" data-level="12.1" data-path="spatial-data-handling.html"><a href="spatial-data-handling.html#learning-objectives-8"><i class="fa fa-check"></i><b>12.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="12.2" data-path="spatial-data-handling.html"><a href="spatial-data-handling.html#functions-learned-6"><i class="fa fa-check"></i><b>12.2</b> Functions Learned</a></li>
<li class="chapter" data-level="12.3" data-path="spatial-data-handling.html"><a href="spatial-data-handling.html#interactive-tutorial-8"><i class="fa fa-check"></i><b>12.3</b> Interactive Tutorial</a></li>
<li class="chapter" data-level="12.4" data-path="spatial-data-handling.html"><a href="spatial-data-handling.html#reading-data-from-an-open-data-portal"><i class="fa fa-check"></i><b>12.4</b> Reading data from an open data portal</a></li>
<li class="chapter" data-level="12.5" data-path="spatial-data-handling.html"><a href="spatial-data-handling.html#selecting-data-to-work-with"><i class="fa fa-check"></i><b>12.5</b> Selecting data to work with</a></li>
<li class="chapter" data-level="12.6" data-path="spatial-data-handling.html"><a href="spatial-data-handling.html#spatial-data-time---my-favorite-part"><i class="fa fa-check"></i><b>12.6</b> Spatial data time - my favorite part!</a></li>
<li class="chapter" data-level="12.7" data-path="spatial-data-handling.html"><a href="spatial-data-handling.html#on-your-own"><i class="fa fa-check"></i><b>12.7</b> On your own</a></li>
<li class="chapter" data-level="12.8" data-path="spatial-data-handling.html"><a href="spatial-data-handling.html#very-important-concepts-projection-and-spatial-join"><i class="fa fa-check"></i><b>12.8</b> Very important concepts: projection, and spatial join</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Spatial Workshop Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="multiple-dataset-gis-operations-visualization-pt.-2" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Multiple-Dataset GIS Operations / Visualization pt. 2</h1>
<div id="learning-objectives-3" class="section level2">
<h2><span class="header-section-number">4.1</span> Learning Objectives</h2>
<ul>
<li>Combine two datasets with spatial join</li>
<li>Perform spatial aggregation (point in polygon)</li>
<li>Manipulate data with dplyr</li>
<li>Save a ggplot image</li>
</ul>
</div>
<div id="functions-learned-3" class="section level2">
<h2><span class="header-section-number">4.2</span> Functions Learned</h2>
<ul>
<li><code>st_join()</code></li>
<li><code>select()</code></li>
<li><code>count()</code></li>
<li><code>arrange()</code></li>
<li><code>st_geometry()</code></li>
<li><code>ggsave()</code></li>
</ul>
<div class="rmdinfo">
<p>
Hint: For each new function we go over, type <code>?</code> in front of it in the console to pull up the help page.
</p>
</div>
</div>
<div id="interactive-tutorial-3" class="section level2">
<h2><span class="header-section-number">4.3</span> Interactive Tutorial</h2>
<div class="rmdinfo">
<p>
This workshop’s script can be found <a href="https://github.com/spatialanalysis/workshop-scripts/blob/master/gis-visualization/spring-2019/R/spatial-join.R">here</a>.
</p>
</div>
</div>
<div id="challenges" class="section level2">
<h2><span class="header-section-number">4.4</span> Challenges</h2>
<p>We’ve been reading shapefiles that we’ve downloaded, but we call also read data directly from a website using an “API”. These are often great ways to get data without having to manually download it.</p>
<p>We’re going to read data from the Chicago Data Portal:</p>
<ul>
<li><a href="https://data.cityofchicago.org/Education/Libraries-Locations-Hours-and-Contact-Information/x8fc-8rcq">Libraries</a> points</li>
<li><a href="https://data.cityofchicago.org/Facilities-Geographic-Boundaries/Boundaries-Community-Areas-current-/cauq-8yn6">Community Area</a> polygons</li>
</ul>
<p>Click on the “API” button to directly access the data, rather than having to download a csv via “Export”.</p>
<div class="learncheck">
<p>
<strong>Challenge</strong>
</p>
</div>
<ol start="0" style="list-style-type: decimal">
<li>Which one of these is a geographic data format?</li>
</ol>
<img src="figs/libraries.png" />
<div class="learncheck">

</div>
<div class="learncheck">
<p>
<strong>Challenge</strong>
</p>
</div>
<ol style="list-style-type: decimal">
<li>Fill in the following script:</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load libraries for use</span>

areas &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;https://data.cityofchicago.org/resource/igwz-8jzy.geojson&quot;</span>)</code></pre>
<pre><code>## Reading layer `OGRGeoJSON&#39; from data source `https://data.cityofchicago.org/resource/igwz-8jzy.geojson&#39; using driver `GeoJSON&#39;
## Simple feature collection with 77 features and 9 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -87.94011 ymin: 41.64454 xmax: -87.52414 ymax: 42.02304
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Read in libraries and areas data</span>



<span class="co"># Project both</span>



<span class="co"># Make a ggplot with libraries and community areas</span></code></pre>
<div class="learncheck">

</div>
<div class="learncheck">
<p>
<strong>Challenge</strong>
</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Which community areas have no libraries? Use <code>st_intersects</code> and <code>filter</code> to make a map.</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load library with filter() in it</span>


<span class="co"># Find which areas intersect with libraries and save as a variable called &quot;intersects&quot;</span>


<span class="co"># Filter areas by *without* libraries. Save as a variable called &quot;no_lib&quot; Hint: use &quot;==&quot; instead of &quot;&gt;&quot; in the logical comparison</span>


<span class="co"># Make a ggplot with libraries, community areas, and community areas without libraries</span></code></pre>
<div class="learncheck">

</div>
<div class="rmdwarning">
<p>
The order in which you give arguments to <code>st_intersects</code> matters! I always have to look it up, but for point-in-polygon, you want the polygon first, then the points.
</p>
</div>
<p>One question you may be asking yourself is, how many libraries are in each area?</p>
<p>We can tackle this with an operation known as a <em>spatial join</em>. What we do is join information about the polygons to the points, so we have for each point which community area it’s in. More formally, we are adding the attributes of a layer to the other one.</p>
<div class="rmdwarning">
<p>
A <strong>spatial join</strong> is not the same as an <strong>attribute join</strong>, which is based on common column (attribute) values between two datasets. Spatial joins are based on a <em>spatial relationship</em>: is this point inside this polygon?
</p>
<p>
You can try doing an <strong>attribute join</strong> on community area number/name with this <a href="https://data.cityofchicago.org/resource/iqnk-2tcu.csv">Public Health dataset</a>, and the command <code>left_join()</code> from <code>dplyr</code>.
</p>
</div>
<p>The syntax is generally as follows, for point-in-polygon:</p>
<blockquote>
<p><code>st_join(point_sf, poly_sf)</code></p>
</blockquote>
<div id="a-simple-example" class="section level3">
<h3><span class="header-section-number">4.4.1</span> A simple example</h3>
<p><img src="figs/point_in_poly.png" /></p>
<p>We can spatial join just one attribute, or a few. We can use <code>select()</code> to choose attributes.</p>
<p>One we’ve done our spatial join, we can manipulate the data with <code>count()</code> and <code>arrange()</code> to figure out which community areas have the most libraries. This is also known as spatial aggregation.</p>
<p>If work with the spatial data gets too clumsy or slow, we can drop the geometry column with <code>st_geometry()&lt;-</code>.</p>
</div>
<div id="saving-your-plots" class="section level3">
<h3><span class="header-section-number">4.4.2</span> Saving your plots</h3>
<p>We ran out of time for this last time, but to save a ggplot image, you can use <code>ggsave()</code> after a ggplot2 command. You can adjust the width and height of the image in arguments to the function.</p>
<div class="learncheck">
<p>
<strong>Challenge</strong>
</p>
</div>
Save one of the plots we’ve made in this workshop to <code>figs/name-of-plot.png</code>.
<div class="learncheck">

</div>
</div>
</div>
<div id="links-3" class="section level2">
<h2><span class="header-section-number">4.5</span> Links</h2>
<p>All the links in this workshop:</p>
<ul>
<li>Link to Chicago Libraries data: <a href="https://data.cityofchicago.org/Education/Libraries-Locations-Hours-and-Contact-Information/x8fc-8rcq" class="uri">https://data.cityofchicago.org/Education/Libraries-Locations-Hours-and-Contact-Information/x8fc-8rcq</a></li>
<li>Link to Chicago Community Areas data: <a href="https://data.cityofchicago.org/Facilities-Geographic-Boundaries/Boundaries-Community-Areas-current-/cauq-8yn6" class="uri">https://data.cityofchicago.org/Facilities-Geographic-Boundaries/Boundaries-Community-Areas-current-/cauq-8yn6</a></li>
</ul>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="multiple-dataset-gis-operations-visualization.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="r-markdown-and-custom-maps.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/spatialanalysis/workshop-notes/edit/master/04-gis-3.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
